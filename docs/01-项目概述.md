# 01 - 项目概述

> **DoraMate**: 面向具身智能开发者的可视化低代码平台 (Rust 全栈版)

---

## 🎯 项目背景

### 为什么需要 DoraMate？

**DORA** (Dataflow-Oriented Robotic Architecture) 是一个高性能的具身智能框架，具有以下特点：

- ✅ **极致性能**: 相比 ROS2 有 10-17x 的性能提升
- ✅ **零拷贝通信**: 使用 Apache Arrow 格式
- ✅ **多语言支持**: Python、Rust、C、C++、C#
- ✅ **2025年生态爆发**: 新增大量 AI 模型节点（Qwen2.5、SAM2、Phi4 等）

**但是**，DORA 的使用门槛较高：

- ❌ 需要手写 YAML 配置文件
- ❌ 节点间连接关系不直观
- ❌ 缺少可视化调试工具
- ❌ 新手学习曲线陡峭

**DoraMate 的使命**：降低 DORA 的使用门槛，让开发者通过拖拽式可视化界面快速构建具身智能数据流。

---

## 🎨 什么是 DoraMate？

### 产品定位

**DoraMate** 是一个面向具身智能开发者的**可视化低代码平台**，核心价值：

1. **降低技术门槛**
   - 无需手写 YAML 配置
   - 拖拽式节点编排
   - 实时预览数据流

2. **提升开发效率**
   - 可视化节点库
   - 自动生成 YAML
   - 一键运行数据流

3. **增强可维护性**
   - 清晰的拓扑图
   - 版本控制集成
   - 节点复用

4. **保留技术深度**
   - 完全兼容 DORA 生态
   - 支持导出标准 YAML
   - 可扩展自定义节点

5. **工业级稳定性** ⭐
   - Rust 内存安全保证
   - 7x24 无故障运行
   - 无 GC 停顿

6. **极致性能** ⭐
   - WebAssembly 零拷贝通信
   - 媲美原生应用性能
   - 细粒度响应式更新

7. **零配置** ⭐
   - 纯文件系统架构
   - 无需数据库安装
   - 开箱即用

---

## 🎯 核心功能

### MVP 功能范围 (v1.0)

#### 1. 可视化节点编辑器
- ✅ 节点面板：拖拽添加节点
- ✅ 画布区域：自由布局、连线
- ✅ 属性面板：编辑节点配置
- ✅ 工具栏：导入、导出、运行、验证

#### 2. YAML 导入导出 ⭐ 核心功能
- ✅ **自动解析 YAML 文件**
- ✅ **自动布局节点拓扑结构**
- ✅ **可视化展示数据流**
- ✅ **导出优化后的 YAML**

#### 3. 本地执行集成 ⭐ Rust 版特性
- ✅ **本地代理服务** (Axum + Tokio)
- ✅ 调用 `dora-cli` 运行数据流
- ✅ 实时日志监控（WebSocket）
- ✅ 节点状态追踪
- ✅ 错误提示与验证

#### 4. 文件系统管理 ⭐ 纯文件系统
- ✅ 打开/保存 YAML 文件
- ✅ 最近文件列表
- ✅ 文件夹浏览
- ✅ 自动备份
- ✅ 配置管理

---

## 🚀 技术栈总览

### 全栈 Rust 方案 ⭐ (纯文件系统)

```
┌─────────────────────────────────────────────┐
│       DoraMate 前端 (Leptos WebAssembly)    │
├─────────────────────────────────────────────┤
│  Leptos 0.7 (细粒度响应式框架)               │
│  - 自定义节点编辑器组件 (SVG/Canvas)         │
│  - Signals (细粒度状态管理)                  │
│  - gloo-net (网络请求)                       │
│  - wasm-bindgen (JS 互操作)                  │
└─────────────────────────────────────────────┘
                  ↕ HTTP/WebSocket
┌─────────────────────────────────────────────┐
│    DoraMate 本地代理 (Axum 1.0) ⭐           │
├─────────────────────────────────────────────┤
│  - Web API (RESTful)                        │
│  - WebSocket (实时通信)                      │
│  - tokio::process (进程管理)                 │
│  - tokio::fs (文件操作) ⭐                   │
│  - serde_yaml (YAML 序列化) ⭐                │
└─────────────────────────────────────────────┘
                  ↕ 文件 I/O
┌─────────────────────────────────────────────┐
│          本地文件系统 ⭐                      │
├─────────────────────────────────────────────┤
│  ~/.doramate/                                │
│  ├── dataflows/          # YAML 数据流文件   │
│  ├── cache/              # 节点缓存          │
│  ├── recent.json         # 最近文件列表      │
│  └── config.toml         # 用户配置          │
└─────────────────────────────────────────────┘
                  ↕ tokio::process::Command
┌─────────────────────────────────────────────┐
│            DORA 核心生态                     │
│  [dora-cli] [dora-daemon] [节点进程]         │
└─────────────────────────────────────────────┘
```

### 技术选型优势

| 技术组件 | 选型 | 核心优势 |
|---------|------|---------|
| **前端框架** | Leptos 0.7 | 细粒度响应式、编译为 WASM、类似 React |
| **状态管理** | Signals | Leptos 内置、零开销、细粒度更新 |
| **后端框架** | Axum 1.0 | 基于 Tokio、极高性能、类型安全路由 |
| **异步运行时** | Tokio 1.x | 成熟稳定、性能卓越、异步 I/O |
| **文件系统** | tokio::fs + std::fs | 异步文件操作 ⭐ |
| **YAML 处理** | serde_yaml | 类型安全序列化/反序列化 ⭐ |
| **实时通信** | Axum WS + tokio-tungstenite | 异步 WebSocket |
| **构建工具** | Trunk | WASM 打包、热重载 |

### 为什么选择 Rust 全栈 + 纯文件系统？ ⭐

**与 Blazor/C# 方案对比**：

| 维度 | Rust 全栈方案 | Blazor/C# 方案 | 推荐 |
|-----|--------------|---------------|------|
| 性能 | ⭐⭐⭐⭐⭐ (WASM 原生、无GC) | ⭐⭐⭐⭐ (WASM、有GC) | **Rust** |
| 稳定性 | ⭐⭐⭐⭐⭐ (内存安全、无停顿) | ⭐⭐⭐⭐ (GC停顿、内存泄漏风险) | **Rust** |
| 类型安全 | ⭐⭐⭐⭐⭐ (编译时保证) | ⭐⭐⭐⭐⭐ (编译时保证) | 平手 |
| 学习曲线 | ⭐⭐⭐ (需学习 Rust/Leptos) | ⭐⭐⭐⭐⭐ (您已掌握 C#) | **C#** |
| 长期价值 | ⭐⭐⭐⭐⭐ (可复用组件库) | ⭐⭐⭐ (仅本系统) | **Rust** |
| 7x24 稳定性 | ⭐⭐⭐⭐⭐ (无 GC、确定性内存) | ⭐⭐⭐ (GC 停顿、需重启) | **Rust** |
| 简化程度 | ⭐⭐⭐⭐⭐ (零数据库、纯文件) | ⭐⭐⭐⭐ (需要 EF Core + SQL) | **Rust** ⭐ |

**选择 Rust 全栈 + 纯文件系统方案的理由**：
1. **工业级稳定性** - 无 GC 停顿，可连续运行数年
2. **性能优越** - WebAssembly 原生支持，零成本抽象
3. **长期价值** - 构建可复用 UI 组件库，为 ERP/MES/PLC 系统迁移铺路
4. **技术壁垒** - 工业软件领域 Rust 技术的先发优势
5. **市场机会** - 工业软件市场 Rust 方案几乎空白
6. **简化开发** - 零数据库配置，专注核心功能 ⭐
7. **零依赖** - 减少 ORM、数据库驱动等复杂依赖 ⭐

---

## 📊 项目目标

### 6个月 MVP 目标

| 阶段 | 时间 | 交付物 |
|------|------|--------|
| **阶段一** | 第1-2月 | 基础架构、画布拖拽、YAML 导入导出、文件系统 ⭐ |
| **阶段二** | 第3-4月 | 完整编辑器、DORA 集成、实时日志、本地代理 ⭐ |
| **阶段三** | 第5-6月 | 性能优化、文档发布、v1.0 正式版 |

### 成功指标

- 📊 **功能完整性**: 支持至少 20 个常用 DORA 节点
- 📊 **性能指标**: 画布支持 50+ 节点流畅运行 (60fps)
- 📊 **用户体验**: 新手 5 分钟内创建第一个数据流
- 📊 **社区影响**: 50+ 种子用户、5万+ 全网曝光
- 📊 **稳定性** ⭐: 连续运行 30 天无故障
- 📊 **文件操作** ⭐: 1000+ 次打开/保存无损坏

---

## 🎓 适用人群

### 主要用户

1. **具身智能开发者** (主要)
   - 机器人应用开发
   - AI 模型集成
   - 计算机视觉应用

2. **AI 研究员** (次要)
   - 快速原型验证
   - 模型组合实验
   - 数据流优化

3. **技术学习者** (次要)
   - 学习 DORA 框架
   - 了解具身智能架构
   - 可视化编程入门

4. **工业软件开发商** (扩展) ⭐
   - 需要高性能、高稳定性解决方案
   - 7x24 无故障运行需求
   - 追求极致性能和零配置

### 技术要求

- **最低要求**: 了解基础编程概念
- **推荐技能**: 熟悉 Rust 或 Python
- **DORA 经验**: 无需前置知识

---

## 📚 文档结构

本文档分为以下几个部分：

1. **项目概述** (本章) - 了解项目背景和目标
2. [Dora 架构分析](./02-Dora架构分析.md) - 理解 DORA 核心架构
3. [产品定位与架构设计](./03-产品定位与架构设计.md) - 产品定位
4. [技术栈选型](./04-技术栈选型.md) - 技术选型详解
5. [Leptos 前端架构](./05-Leptos前端架构.md) - 前端实现 ⭐
6. [Axum 后端架构](./06-Axum后端架构.md) - 后端实现 ⭐
7. [文件系统架构](./07-文件系统架构.md) - 文件系统设计 ⭐
8. [可视化编辑器规划](./08-可视化编辑器规划.md) - UI/UX 设计
9. [DORA 本地集成](./09-Dora本地集成.md) - DORA CLI 集成 ⭐
10. [YAML 可视化功能](./10-YAML可视化功能.md) - ⭐ 核心功能
11. [MVP 开发计划](./11-MVP开发计划.md) - 6个月路线图
12. [数据模型设计](./12-数据模型设计.md) - 前后端数据结构
13. [验收标准](./13-验收标准.md) - MVP 验收
14. [本地执行架构](./14-本地执行架构.md) - 本地代理服务 ⭐
15. [工业级 UI 组件库设计](./15-工业级UI组件库设计.md) - 可复用组件库 ⭐
16. [系统迁移规划](./16-系统迁移规划.md) - ERP/MES 迁移规划 ⭐

---

## 🚀 下一步

**准备好开始了吗？**

- 📖 继续阅读：[02 - Dora 架构核心要点](./00-技术实现路径摘要.md#dora架构核心要点)
- 🛠️ 直接开发：查看 [11 - MVP 开发计划](./11-MVP开发计划.md)

---

## 核心优势总结 ⭐

### 与传统 DORA 开发对比

| 功能 | 传统 DORA | DoraMate | 提升 |
|------|----------|----------|------|
| 数据流创建 | 手写 YAML | 拖拽节点 | 5x 效率 |
| 节点连接 | 手动配置 | 自动连线 | 10x 效率 |
| 错误排查 | 运行时报错 | 实时验证 | 3x 效率 |
| 学习曲线 | 陡峭 | 平缓 | -70% 时间 |

### YAML 可视化功能优势（独有）

| 功能 | 传统方式 | DoraMate YAML 可视化 |
|------|---------|---------------------|
| 理解数据流 | 需要阅读整个 YAML 文件 | 一目了然的拓扑图 |
| 发现连接错误 | 手动追踪输入输出 | 自动高亮错误连接 |
| 优化结构 | 需要重新理解整个文件 | 拖拽即可调整 |
| 学习曲线 | 陡峭 | 平缓 |

### 技术优势 (Rust 版 + 纯文件系统) ⭐

1. **全栈 Rust**: 前后端统一语言，代码复用最大化
2. **类型安全**: 编译时检查，零运行时类型错误
3. **高性能**: Leptos 细粒度响应式 + WASM 原生性能
4. **工业级稳定性**: 无 GC 停顿，可连续运行数年
5. **内存安全**: Rust 编译器保证，无内存泄漏
6. **YAML 自动布局**: 层次化布局算法，自动优化拓扑结构
7. **可复用组件库**: 为 ERP/MES/PLC 系统迁移奠定基础
8. **零数据库**: 简化架构、零配置、零依赖 ⭐
9. **纯文件系统**: 符合 Unix 哲学、易于备份、易于理解 ⭐

### 长期战略价值 ⭐ (工业软件迁移)

**第一次 (DoraMate)**:
- 学习 Leptos + WASM: 2个月
- 构建工业级 UI 组件库: 2个月
- 开发 DoraMate: 2个月
- **总计**: 6个月

**后续迁移 (5大系统)**:
- ERP: 复用组件库 → 3个月
- OA: 复用组件库 → 2个月
- MES: 复用组件库 → 4个月
- PLC 系统: 复用组件库 → 3个月
- 生产调度: 复用组件库 → 3个月

**节省时间**: 15个月 vs 25个月 (如果每次都学)
**投资回报率**: 10倍以上!

---

**文档作者**: 夏豪
**最后更新**: 2025-01-21
**版本**: v4.0 (Rust 全栈 + 纯文件系统)
**基于**: 00-技术实现路径摘要.md
