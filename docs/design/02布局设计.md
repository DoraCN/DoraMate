# 布局设计

## 1. 布局设计原则

DoraMate 的整体布局以**高频编辑效率**和**可视化逻辑表达**为核心目标。

在设计上遵循以下原则：

- 中央画布始终占据最高视觉与操作优先级
- 构建（节点）与配置（属性）分离，减少界面干扰
- 全局操作集中在固定位置，避免误触和记忆成本
- 布局稳定，避免在运行或编辑过程中发生大规模结构变化

整体采用在开发者工具中被广泛验证的 **三栏 + 顶部工具栏** 布局。

---

## 2. 区域划分与职责

页面由四个主要区域构成：

1. 顶部工具栏（Toolbar）
2. 左侧节点面板（NodePanel）
3. 中央画布区域（Canvas）
4. 右侧属性面板（PropertyPanel）

各区域职责清晰、边界明确，避免功能重叠。

---

### 2.1 工具栏（Toolbar）

工具栏用于承载**影响整个 Flow 或工作区的全局操作**。

这些操作通常具有以下特征：
- 不依附于某个具体节点
- 操作频率相对较低，但后果明确
- 用户希望随时可见、位置稳定

核心功能包括：

- 打开 / 保存 Flow
- 导入 / 导出 YAML
- 结构验证（Validate）
- 本地运行 / 停止 Flow

工具栏中的“本地运行”是最高优先级操作，应在视觉上明显区别于其他按钮。

---

### 2.2 节点面板（NodePanel）

节点面板是用户**构建数据流的入口**。

主要职责是：
- 展示系统支持的节点类型
- 提供清晰的节点分类
- 支持通过拖拽的方式将节点添加到画布

节点在面板中的呈现应具备基础的语义暗示，使用户在拖拽前就能大致理解其用途。

---

### 2.3 画布（Canvas）

画布是 DoraMate 的核心工作区域。

用户在画布中完成的主要任务包括：
- 放置和组织节点
- 建立节点之间的数据连接
- 从整体结构理解 Flow 的执行逻辑

在运行状态下，画布还承担**系统状态反馈**的职责，例如：
- 当前运行路径
- 出错节点位置
- 连接是否有效

因此，画布不仅是编辑区域，也是理解系统行为的主要载体。

---

### 2.4 属性面板（PropertyPanel）

属性面板用于展示和编辑**当前选中对象的详细配置**。

其设计重点在于：
- 与画布选中状态实时同步
- 参数分组清晰，避免一次性暴露过多信息
- 高级参数默认隐藏，降低初次使用成本

属性面板应保持功能完整，但在视觉上避免干扰画布区域。

---

## 3. UI 设计规格

以下内容为前端实现时可以直接遵守的样式与布局规范。


---

### 3.1 整体布局规格

- 布局方式：左右三栏 + 顶部固定工具栏
- 页面背景色：`#F3F4F6`
- 主要卡片背景：`#FFFFFF`

区域尺寸：

| 区域 | 尺寸 |
|----|----|
| Toolbar | 高度 56px |
| NodePanel | 宽度 260px |
| Canvas | 自适应填充 |
| PropertyPanel | 宽度 300px |

---

### 3.2 Toolbar 设计规格

- 高度：56px
- 背景色：`#1F2937`
- 文字颜色：`#FFFFFF`

包含按钮：
- 打开
- 保存
- 导入 YAML
- 导出 YAML
- 验证
- 本地运行（主按钮）

按钮样式：
- 普通按钮：透明背景，白色文字
- 悬停状态：背景 `#374151`
- 主按钮（本地运行）：
  - 背景 `#22C55E`
  - 悬停背景 `#16A34A`
  - 圆角 `6px`

---

### 3.3 NodePanel 节点卡片规格

- 面板背景：`#F9FAFB`
- 节点卡片尺寸：`220 × 56px`
- 圆角：`12px`
- 背景色：`#FFFFFF`
- 阴影：`0 2px 8px rgba(0,0,0,0.1)`

节点类型色标（左侧色条）：
- 输入节点：`#3B82F6`
- 处理节点：`#22C55E`
- 输出节点：`#A855F7`
- 错误状态：`#EF4444`

交互：
- 悬停时显示浅色高亮
- 支持拖拽到画布

---

### 3.4 画布节点（Node）规格

- 尺寸：`180 × 110px`
- 圆角：`16px`
- 背景：`#FFFFFF`
- 阴影：`0 4px 16px rgba(0,0,0,0.15)`

标题栏：
- 位于顶部
- 按节点类型着色（蓝 / 绿 / 紫）

选中状态：
- 外框描边 `2px #2563EB`

端口：
- 输入端口位于左侧，输出端口位于右侧
- 圆形，直径 `10px`
- 默认颜色 `#9CA3AF`

---

### 3.5 连线（Edge）设计规格

默认状态：
- 颜色：`#6B7280`
- 宽度：`2px`
- 贝塞尔曲线

合法连接预览：
- 颜色：`#3B82F6`
- 虚线

错误连接：
- 颜色：`#EF4444`

运行中状态：
- 颜色：`#22C55E`
- 连线上显示流动的小圆点动画，用于表达数据流动方向

---

### 3.6 PropertyPanel 规格

- 宽度：`300px`
- 背景：`#FFFFFF`
- 标题：节点属性

表单项：
- 垂直排列
- 间距：`12px`

高级选项：
- 默认折叠
- 点击“高级设置”后展开

---

### 3.7 即时反馈与动效规范

- 按钮点击：背景色加深
- 节点拖拽中：透明度 `0.7`
- 非法连接：连线立即变红
- Flow 运行中：连线显示绿色流动动画
- 所有状态切换统一使用 `0.2s` 过渡动画
