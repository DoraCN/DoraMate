# 05 交互状态设计

## 1. 状态设计原则

交互状态用于让用户在第一时间理解系统当前状态，而非依赖说明文字。

设计原则：

- 状态必须即时反馈
- 每一种状态只表达一个明确含义
- 状态变化以视觉为主，不依赖文字提示
- 状态反馈不得干扰主要操作流程

---

## 2. 全局状态类型定义

DoraMate V1.0 中使用的基础状态类型如下：

| 状态名 | 含义 |
|------|------|
| Default | 默认静态状态 |
| Hover | 指针悬停状态 |
| Active | 点击或拖拽中 |
| Selected | 被选中状态 |
| Disabled | 当前不可用 |
| Running | 系统运行中 |
| Error | 错误状态 |

所有 UI 元素的状态变化均应从上述状态集合中组合，而非引入额外状态。

---

## 3. 节点状态规范

### 3.1 Default（默认）

- 背景：节点基础色
- 边框：中性灰
- 阴影：轻微，用于区分画布背景

---

### 3.2 Hover（悬停）

- 边框高亮
- 阴影增强
- 节点 Header 显示可拖拽提示

Hover 状态仅用于提示“可操作”，不改变节点结构。

---

### 3.3 Selected（选中）

- 边框加粗并高亮
- 显示节点相关操作控件
- 画布中其他节点与连线弱化显示

选中状态用于建立当前操作焦点。

---

### 3.4 Active（拖拽中）

- 节点透明度降低至 0.7
- 禁止节点内部按钮被触发
- 连线位置实时更新

---

### 3.5 Running（运行中）

- 节点 Header 显示运行指示状态
- 可使用轻量动画（如 pulse）
- 禁止节点结构性编辑（新增 / 删除 / 连接）

---

### 3.6 Error（错误）

- 节点边框变为红色
- 显示错误图标
- Hover 时可展示错误详情

错误状态保持，直到用户完成修复。

---

## 4. 端口状态规范

| 状态 | 表现说明 |
|----|----|
| Default | 中性颜色 |
| Hover | 高亮显示 |
| Connectable | 明确可连接提示 |
| Not Connectable | 灰色或红色提示 |
| Active | 连线拖拽中高亮 |

端口是否可连接必须在拖拽阶段提前给出反馈。

---

## 5. 连线状态规范

### 5.1 Default（默认）

- 线宽：2px
- 颜色：中性灰

---

### 5.2 Hover（悬停）

- 线条略微加粗
- 颜色高亮

---

### 5.3 Active / Dragging（拖拽中）

- 连线跟随指针
- 半透明显示

---

### 5.4 Error（错误）

- 颜色：红色
- 可使用虚线样式
- Hover 时可定位错误来源

---

### 5.5 Running（运行中）

- 颜色：绿色
- 连线上显示流动动画，用于表达数据流动状态

---

## 6. 按钮与控件状态规范

| 状态 | 表现 |
|----|----|
| Hover | 背景或亮度增强 |
| Active | 下压视觉反馈 |
| Disabled | 对比度降低 |
| Loading | Spinner + 禁用交互 |

---

## 7. 动画与过渡规范

- Hover / Active 动画时长：150–200ms
- 状态切换使用 ease-out 缓动
- 避免闪烁、抖动或夸张动画
- 动画仅用于状态变化，不作为装饰

---

## 8. 可访问性约束（基础）

- 状态区分不只依赖颜色
- Error 状态必须配合 icon 或结构变化
- Hover 不作为唯一反馈手段

---

## 9. 与前端样式的映射约定

建议统一使用以下状态类名：

- `.is-hover`
- `.is-active`
- `.is-selected`
- `.is-running`
- `.is-error`
- `.is-disabled`

状态类名仅表达状态，不承载业务逻辑。

---

## 10. 设计目标总结

- 状态表达清晰
- 行为符合预期
- 学习成本可控
- 前端实现与维护成本可控
